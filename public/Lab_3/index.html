<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>US Quiz</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <style>
        body {
            background-color: lightblue;
            /*//width: 50%;*/
        }
        #q7desc {
            text-
        }

    </style>
</head>

<body class="text-center">
<h1 class="jumbotron">US Geography quiz</h1>
<h3><span id="markImg1"></span>What is the Capital of California</h3>
<input type="text" id="q1">
<div id="q1Feedback" class="feedback"></div>
<br>

<h3><span id="markImg2"></span>What is the longest river? </h3>
<select id="q2">
    <option value="">Select One</option>
    <option value="ms">Mississippi</option>
    <option value="mo">Missouri</option>
    <option value="co">Colorado</option>
    <option value="de">Delaware</option>
</select>
<br><br>
<div id="q2Feedback" class="feedback"></div>
<br>

<h3><span id="markImg3"></span>What presidents are carved into mount Rushmore?</h3>
<input type="checkbox" id="Jackson"> <label for="Jackson">A.Jackson</label>
<input type="checkbox" id="Franklin"> <label for="Franklin">B.Franklin</label>
<input type="checkbox" id="Jefferson"> <label for="Jefferson">T. Jefferson</label>
<input type="checkbox" id="Roosevelt"> <label for="Roosevelt">T. Roosevelt</label>
<br><br>
<div id="q3Feedback" class="feedback"></div>
<br>

<h3><span id="markImg4"></span>What is the smallest US State?</h3>
<div id="q4Choices"></div>
<div id="q4Feedback" class="feedback"></div>
<br><br>

<h3><span id="markImg5"></span>What image is in the Great Seal of the state of California?</h3>
<img src="img/seal1.png" alt="Seal 1" class="q5Choice" id="seal1">
<img src="img/seal2.png" alt="Seal 2" class="q5Choice" id="seal2">
<img src="img/seal3.png" alt="Seal 3" class="q5Choice" id="seal3">
<div id="q5Feedback" class="feedback"></div>
<br><br>
<h3><span id="markImg6"></span>How many states does the United States have?</h3>
<input type="number" id="q6">
<div id="q6Feedback"></div>
<br>

<h3><span id="markImg7"></span>How many original states did the US have?</h3>
<h3 id="q7desc">1<input type="range" id="q7" min="1" max="13">13</h3>
<div id="q7Feedback"></div>
<br><br>

<h3><span id="markImg8"></span>What is one color on the US Flag?</h3>
<input type="color" id="q8">
<div id="q8Feedback"></div>
<br><br>

<h3 id="validationFdbk" class="bg-danger text-white"></h3>
<h4 id="congratz"></h4>
<h2 id="totalScore" class="text-info"></h2>
<button type="button" class="btn btn-success btn-lg btn-block"> Submit Quiz</button>
<h2 id="taken"></h2>
<h3 id="previous"></h3>
<dummy></dummy>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src = "https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.9.1/underscore-min.js" ></script>
<script>
    $(document).ready(function(){
        var score = 0;
        var q5_response = "";


        $("button").on('click',gradeQuiz);

        $(".q5Choice").on('click', function(){
            $(".q5Choice").css("background","");
            $(this).css("background","rgb(255,255,0");
            q5_response = $(this).attr("id");
        });

        displayQ4Choices();
        function displayQ4Choices(){
            let q4ChoicesArray = ["Maine", "Rhode Island", "Maryland", "Delaware"];
            q4ChoicesArray = _.shuffle(q4ChoicesArray);
            for(let i = 0; i < q4ChoicesArray.length; i++){
                $("#q4Choices").append(`<input type="radio" name="q4" id="${q4ChoicesArray[i]}" value="${q4ChoicesArray[i]}"> <label for="${q4ChoicesArray[i]}"> ${q4ChoicesArray[i]}</label>`);
            }
        }

        function isFormValid(){
            let isValid = true;
            if($("#q1").val() == ""){
                isValid = false;
                $("#validationFdbk").html("Question 1 was not answered");
            } //else if($("#q2").val() == ""){
            //     isValid = false;
            //     $("#validationFdbk").html("Question 2 was not answered");
            // } else if(!$("#Jefferson").is(":checked") && !$("#Roosevelt").is(":checked") && !$("#Jackson").is(":checked") && !$("#Franklin").is(":checked")){
            //     isValid = false;
            //     $("#validationFdbk").html("Question 3 was not answered");
            // }else if (q5_response == ""){
            //     isValid =false;
            //     $("#validationFdbk").html("Question 5 was not answered");
            // }
            return isValid;
        }

        function rightAnswer(index){
            $("#q" + index + "Feedback").html("Correct!");
            $("#q"+ index +"Feedback").attr("class", "bg-success text-white");
            $("#markImg" + index).html("<img src='img/checkmark.png' alt='checkmark'>");
            score += 12.5;
        }

        function wrongAnswer(index){
            $("#q"+ index +"Feedback").html("Incorrect!");
            $("#q"+ index +"Feedback").attr("class", "bg-warning text-white");
            $("#markImg" + index).html("<img src='img/xmark.png' alt='xmark'>");
        }

        function attemptStore(){
            if(typeof(Storage) !== "undefined") {
                if (sessionStorage.clickcount) {
                    sessionStorage.clickcount = Number(sessionStorage.clickcount)+1;
                } else {
                    sessionStorage.clickcount = 1;
                }
                $("#taken").html('Quiz Taken: '+ sessionStorage.clickcount + ' Time(s)');
            } else {
                $("#taken").html( "Sorry, your browser does not support web storage...");
            }
        }

        function gradeQuiz() {
            //sessionStorage.setItem('responses',responses);
            $("#validationFdbk").html(""); //resets validation feedback
            if (!isFormValid()) {
                return;
            }
            score = 0;

            let q1response = $("#q1").val().toLowerCase();
            let q2response = $("#q2").val();
            let q1result = new Boolean(q1response == "sacramento");
            let q2result = new Boolean(q2response == "mo");
            let q3result = new Boolean($("#Jefferson").is(":checked") && $("#Roosevelt").is(":checked") && !$("#Jackson").is(":checked") && !$("#Franklin").is(":checked"));
            let q4result = new Boolean($("input[name=q4]:checked").val() == "Rhode Island");
            let q5result = new Boolean(q5_response == "seal2");
            let q6result = new Boolean($("#q6").val() == 50);
            let q7result = new Boolean($("#q7").val() == 13);
            let q8result = new Boolean($("#q8").val() == "#ff0000" || $("#q8").val() == "#ffffff" || $("#q8").val() == "#0000ff");
             console.log($("#q8").val());
            // var q7_response = $("#q7").valueOf();
            // console.log(q7_response);
            let resultsArray = [q1result, q2result, q3result, q4result, q5result,q6result,q7result,q8result];
            for (let j = 0; j < 8; j++) {

                if (resultsArray[j] == true) {
                    rightAnswer(j + 1);
                } else {
                    wrongAnswer(j + 1);
                }
            }


            //     if(q1response == "sacramento"){
            //         rightAnswer(1);
            //     }else{
            //         wrongAnswer(1);
            //     }
            //     if(q2response == "mo"){
            //         rightAnswer(2);
            //     }else{
            //         wrongAnswer(2);
            //     }
            //     if($("#Jefferson").is(":checked") && $("#Roosevelt").is(":checked") && !$("#Jackson").is(":checked") && !$("#Franklin").is(":checked")){
            //         rightAnswer(3);
            //     }else{
            //         wrongAnswer(3);
            //     }
            //     if($("input[name=q4]:checked").val() == "Rhode Island"){
            //         rightAnswer(4);
            //     }else{
            //         wrongAnswer(4);
            //     }
            //     if(q5_response == "seal2"){
            //         rightAnswer(5);
            //     }else{
            //         wrongAnswer(5);
            //     }
            if(score < 80){
                $("#totalScore").attr('class', "bg-danger");
            }else {
                $("#totalScore").attr('class', "bg-success");
            }
            if(score == 100){
                $("#congratz").html("CONGRATULATIONS!!");
            }
            $("#totalScore").html('Total Score '+ score);
            attemptStore();
            if(sessionStorage.clickcount > 1){
                $("#previous").html('Previous results: '+ sessionStorage.getItem("responses"));
            }

            sessionStorage.setItem("responses",sessionStorage.getItem("responses") +score+" ")
            // READ THIS use localStorage instead of sessionStorage
            // guesses++;
            // $("#taken").html('Quiz Taken: '+ guesses + ' Time(s)');
        }
    });
</script>
</body>
</html>